<!doctype html>
<html lang="en" class="no-js" prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        {%- seo -%}

        {%- include head/social.html -%}

        <meta name="referrer" content="strict-origin-when-cross-origin">

        {%- include head/favicons.html -%}

        <link rel="canonical" href="{{ site.url }}{{ page.url }}">

        <link rel="dns-prefetch" href="https://stackpath.bootstrapcdn.com/">
        <link rel="dns-prefetch" href="https://code.jquery.com/">
        <link rel="dns-prefetch" href="https://fonts.googleapis.com/">

        {%- if page.slug == "home" -%}
        <link rel="preload" href="/assets/img/landing-page-bkg.jpg" as="image" media="(min-width: 768px)">
        <link rel="preload" href="/assets/img/landing-page-bkg-small.jpg" as="image" media="(max-width: 767px)">
        {%- endif -%}

        <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans%7CShare+Tech+Mono" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <link rel="preload" href="{{ site.data.assets.cookieConsent.css }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <link rel="preload" href="{{ site.data.assets.bootstrap.css.url }}" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin="anonymous">
        <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans%7CShare+Tech+Mono">
        <link rel="stylesheet" href="{{ site.data.assets.cookieConsent.css }}">
        <link rel="stylesheet" href="{{ site.data.assets.bootstrap.css.url }}" crossorigin="anonymous">
        </noscript>

        <style>
        {%- capture include_to_scssify -%}
            {%- include assets/_critical.scss -%}

            {%- if page.slug == "tickets" -%}
            {%- include assets/_tickets.scss -%}
            {%- endif -%}
        {%- endcapture -%}
        {{- include_to_scssify | scssify -}}
        </style>

        <script>
            {%- include assets/cssrelpreload.min.js -%}
            {%- include assets/nojs.js -%}
            {%- include assets/loadjs.min.js -%}

            var cookieConsentJs = '{{ site.data.assets.cookieConsent.js }}';
            var jquery = '{{ site.data.assets.jquery.url }}';
            var jqueryIntegrity = '{{ site.data.assets.jquery.integrity }}';
            var bootstrapBundle = '{{ site.data.assets.bootstrap.js.url }}';
            var bootstrapIntegrity = '{{ site.data.assets.bootstrap.js.integrity }}';

            {%- if page.slug == 'tickets' -%}
                var ticketsCarousel = '/assets/js/tickets-carousel.js';
            {%- endif -%}

            {%- assign baseBundleItems = 'jquery, bootstrapBundle' -%}

            {%- if page.slug == 'tickets' -%}
                {%- assign bundleItems = baseBundleItems | append: ', ticketsCarousel' -%}
            {%- else -%}
                {%- assign bundleItems = baseBundleItems -%}
            {%- endif -%}

            loadjs([{{ bundleItems }}], 'jsBundle', {
                async: false,
                before: function(path, scriptEl) {
                    if (path === jquery) {
                        scriptEl.integrity = jqueryIntegrity;
                    } else if (path === bootstrapBundle) {
                        scriptEl.integrity = bootstrapIntegrity;
                    }
                    scriptEl.crossOrigin = true;
                }
            });
            loadjs(cookieConsentJs, 'cookieConsent', {
                success: function() {
                    window.addEventListener('load', function() {
                        window.cookieconsent.initialise({
                            palette: {
                                popup: {
                                    background: '#000'
                                },
                                button: {
                                    background: 'transparent',
                                    border: '#f1d600',
                                    text: '#f1d600'
                                }
                            },
                            content: {
                                href: '/privacy/'
                            }
                        });
                    });
                }
            });
        </script>
    </head>

    {%- capture body_class -%}
        layout-{{ page.layout }}{% if page.body_class %} page-{{ page.body_class }}{% elsif page.slug %} page-{{ page.slug | slugify }}{% endif %}
    {%- endcapture -%}
    <body class="{{ body_class }}">
        <header class="mast-header">
            {%- include nav.html -%}
        </header>

        {%- if page.slug == 'home' -%}
            {%- include home/hero.html -%}
        {%- endif %}
